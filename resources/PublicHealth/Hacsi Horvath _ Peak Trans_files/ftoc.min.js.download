var fixedtoc=function(t){function i(t){return parseInt(t)||0}function o(t){return parseFloat(t)||0}function r(t){return t.length&&"fixed"==t.css("position")?i(t.outerHeight()):0}function f(t){t.preventDefault()}function a(t){return i(t-2*fixedtocOption.contentsBorderWidth)}function s(t){n.isDebug()&&console.log(t)}function u(){d={window:t(window),document:t(document),body:t("body"),container:t("#ftwp-container"),trigger:t("#ftwp-trigger"),contents:t("#ftwp-contents"),header:t("#ftwp-header"),minIcon:t("#ftwp-header-minimize"),list:t("#ftwp-list"),postStart:t("#ftwp-postcontent-start"),postEnd:t("#ftwp-postcontent-end")},d.anchors=d.list.find(".ftwp-anchor").not(".ftwp-otherpage-anchor"),n.isNestedList()&&(d.hasSubItems=d.list.find(".ftwp-has-sub")),n.showColExpIcon()&&(d.colExpIcons=d.list.find(".ftwp-icon-expand, .ftwp-icon-collapse")),n.inWidget()&&(d.widget=t(".ftwp-widget"),d.widgetContainer=t("#ftwp-widget-container")),n.supportInPost()&&(d.containerOuter=t("#ftwp-container-outer")),s(d)}function l(){d.anchors.each(function(e){t(this).data("index",e)})}var d,e=function(){var t=function(){fixedtocOption.scrollDuration=500,fixedtocOption.fadeTriggerDuration=5e3,fixedtocOption.scrollOffset=i(fixedtocOption.scrollOffset),fixedtocOption.fixedOffsetX=i(fixedtocOption.fixedOffsetX),fixedtocOption.fixedOffsetY=i(fixedtocOption.fixedOffsetY),fixedtocOption.contentsFixedHeight=i(fixedtocOption.contentsFixedHeight),fixedtocOption.contentsWidthInPost=i(fixedtocOption.contentsWidthInPost),fixedtocOption.contentsHeightInPost=i(fixedtocOption.contentsHeightInPost),fixedtocOption.triggerBorderWidth=f(fixedtocOption.triggerBorder),fixedtocOption.contentsBorderWidth=f(fixedtocOption.contentsBorder),fixedtocOption.triggerSize=i(fixedtocOption.triggerSize)},e=function(t,e,n){"int"==n?fixedtocOption[t]=i(e):"float"==n?fixedtocOption[t]=o(e):fixedtocOption[t]=e},n=function(t,n,i){e(t,n,i)},r=function(t){void 0!==fixedtocOption[t]&&delete fixedtocOption[t]},f=function(t){switch(t){case"thin":return 1;case"medium":return 2;case"bold":return 5;default:return 0}};return{init:t,set:e,update:n,remove:r}}(),n={inWidgetProp:void 0,showAdminbar:function(){return fixedtocOption.showAdminbar},isQuickMin:function(){return fixedtocOption.isQuickMin},isEscMin:function(){return fixedtocOption.isEscMin},isEnterMax:function(){return fixedtocOption.isEnterMax},isNestedList:function(){return fixedtocOption.isNestedList},isColExpList:function(){return fixedtocOption.isColExpList},showColExpIcon:function(){return fixedtocOption.showColExpIcon},isAccordionList:function(){return fixedtocOption.isAccordionList},showTargetHint:function(){return!0},supportInPost:function(){return fixedtocOption.inPost},inWidget:function(){return fixedtocOption.inWidget?(void 0===this.inWidgetProp&&(this.inWidgetProp=t("#ftwp-widget-container").length?!0:!1),this.inWidgetProp):!1},fixedWidget:function(){return this.inWidget()?fixedtocOption.fixedWidget:!1},isAutoHeightFixedToPost:function(){return 0==fixedtocOption.contentsFixedHeight},isFloat:function(){return"none"!=fixedtocOption.contentsFloatInPost?!0:!1},isAutoHeightInPost:function(){return 0==fixedtocOption.contentsHeightInPost},isPositionAtFixed:function(t){return-1==fixedtocOption.fixedPosition.indexOf(t)?!1:!0},isDebug:function(){return 1==fixedtocOption.debug?!0:!1}},p=function(){var b,H,e={},o=function(){e.scrollTop=d.window.scrollTop()},f=function(){e.window={},e.window.width=window.innerWidth,e.window.height=window.innerHeight},c=function(){e.document={},e.document.height=Math.round(d.document.height())},u=function(){e.adminbarHeight=n.showAdminbar()?r(t("#wpadminbar")):0},l=function(){e.fixedMenuHeight=r(t(fixedtocOption.fixedMenu))},p=function(){fixedtocOption.fixedMenu?e.fixedHeight=e.adminbarHeight+e.fixedMenuHeight:e.fixedHeight=e.adminbarHeight},g=function(){e.fixedOffsetTop=e.fixedHeight+fixedtocOption.fixedOffsetY},x=function(){e.headingOffset=e.fixedHeight+fixedtocOption.scrollOffset},w=function(){e.headingsTop=[],t.each(d.anchors,function(){var n=t(t(this).attr("href")),o=n.length?i(n.offset().top-e.headingOffset):NaN;isNaN(o)||e.headingsTop.push({headingTop:o,anchorEle:t(this)})})},m=function(){e.postRect={};var t=d.postStart.offset(),n=d.postEnd.offset();e.postRect.left=t.left,e.postRect.top=t.top,e.postRect.width=d.postStart.outerWidth(),e.postRect.right=e.postRect.left+e.postRect.width,e.postRect.bottom=n.top,e.postRect.height=e.postRect.bottom-e.postRect.top},O=function(){e.ftcoRangeY={},n.supportInPost()?e.ftcoRangeY.top=e.inPostRangeY.bottom:e.ftcoRangeY.top=e.postRect.top-e.fixedHeight,e.ftcoRangeY.bottom=e.postRect.bottom-e.window.height},C=function(){var t=function(){var t;n.isAutoHeightInPost()?(d.container.css("position","static"),t=d.containerOuter.outerHeight(),d.container.css("position","")):t=fixedtocOption.contentsHeightInPost,d.containerOuter.css("height",t+"px"),e.containerOuterHeight=t},i=function(){function t(){d.containerOuter.css("height","auto"),d.contents.css("height","auto"),h.setAuto(),e.containerOuterHeight=d.containerOuter.outerHeight(),d.containerOuter.css("height",""),d.contents.css("height",""),h.unset()}v.location.inPost&&(n.isAutoHeightInPost()?t():"collapse"==d.contents.data("colExp")?t():(d.containerOuter.css("height",fixedtocOption.contentsHeightInPost+"px"),d.contents.css("height",fixedtocOption.contentsHeightInPost+"px"),h.set(a(fixedtocOption.contentsHeightInPost)),e.containerOuterHeight=d.containerOuter.outerHeight(),d.containerOuter.css("height",""),d.contents.css("height",""),h.unset()))};return{set:t,update:i}}(),T=function(){e.inPostRangeY={},e.inPostRangeY.top=0,e.inPostRangeY.bottom=d.containerOuter.offset().top+e.containerOuterHeight-e.fixedHeight},I=function(){e.inWidgetMinWidth=e.postRect.width+d.widgetContainer.outerWidth()},W=function(){e.fixedWidgetRangeY={},e.fixedWidgetRangeY.top=d.widgetContainer.offset().top-e.fixedHeight,e.fixedWidgetRangeY.bottom=e.ftcoRangeY.bottom},A=function(){var t=function(){e.ftocRectInWidget={left:d.widgetContainer.offset().left,top:e.fixedHeight,width:d.widgetContainer.outerWidth(),height:n()}},n=function(){var t;return"collapse"==d.contents.data("colExp")?(d.contents.css("height","auto"),t=d.contents.outerHeight(),d.contents.css("height","")):t=window.innerHeight-e.fixedHeight,t},i=function(){t()},o=function(){e.ftocRectInWidget.height=n()};return{set:t,updateOnResize:i,updateHeight:o}}(),P=function(){f(),o(),u(),fixedtocOption.fixedMenu&&l(),p(),g(),n.supportInPost()&&(C.update(),T()),x(),m(),O(),n.inWidget()&&I(),n.fixedWidget()&&(W(),A.updateOnResize()),w(),s(e)},R=function(){o(),fixedtocOption.fixedMenu&&(void 0===b&&(b=e.fixedMenuHeight),l(),b!==e.fixedMenuHeight&&(p(),g(),n.supportInPost()&&T(),x(),m(),O(),n.inWidget()&&I(),n.fixedWidget()&&(W(),A.updateOnResize()),w(),b=e.fixedMenuHeight,s(e)))},z=function(){c();var t=e.document.height;t!=H&&(fixedtoc.reload(),H=e.document.height,s("Document Height: "+e.document.height))};return{data:e,ftocRectInWidget:A,createOnInit:function(){f(),o(),u(),fixedtocOption.fixedMenu&&l(),p(),g(),n.supportInPost()&&(C.set(),T()),x(),m(),O(),n.inWidget()&&I(),n.fixedWidget()&&(W(),A.set()),w(),s(this.data)},updateOnResize:P,updateOnScroll:R,updateInPost:function(){C.update(),T(),x(),w(),m(),O()},updateOnDocumentHeightChange:z}}(),g=function(){var t=function(){return n.inWidget()&&p.data.window.width>=p.data.inWidgetMinWidth?!0:!1},e=function(){return n.fixedWidget()&&t()&&p.data.fixedWidgetRangeY.top<=p.data.scrollTop&&p.data.fixedWidgetRangeY.bottom>p.data.scrollTop?!0:!1},i=function(){return n.supportInPost()&&p.data.inPostRangeY.bottom>p.data.scrollTop?!0:!1},o=function(){return p.data.ftcoRangeY.top<=p.data.scrollTop&&p.data.ftcoRangeY.bottom>p.data.scrollTop?!0:!1};return{fixedWidget:e,inWidget:t,inPost:i,fixedToPost:o}}(),v=function(){var e={fixedWidget:!1,inWidget:!1,inPost:!1,fixedToPost:!1,hidden:!1},n=["common","hidden","fixedToPost","inPost","inWidget","fixedWidget"],i=function(e,i){return-1==t.inArray(e,n)?void s("Not support this event: "+e):(void 0!==i._construct&&d.container.on("ftoc_"+e,i._construct),void("common"!=e&&void 0!==i._destruct&&d.container.on("_ftoc_"+e,i._destruct)))},o=function(t){function i(e){for(var i=n.length,o={location:e,eventType:t},r=1;i>r;r++)e!=n[r]&&d.container.trigger("_ftoc_"+n[r],o);d.container.trigger("ftoc_"+e,o)}function o(t){for(var i=1,o=n.length;o>i;i++)void 0!==t&&t==n[i]?e[t]=!0:e[n[i]]=!1}g.fixedWidget()?e.fixedWidget||(o("fixedWidget"),i("fixedWidget"),s(e)):g.inWidget()?e.inWidget||(o("inWidget"),i("inWidget"),s(e)):g.inPost()?e.inPost||(o("inPost"),i("inPost"),s(e)):g.fixedToPost()?e.fixedToPost||(o("fixedToPost"),i("fixedToPost"),s(e)):e.hidden||(o("hidden"),i("hidden"),s(e))};return{location:e,register:i,updateOnResize:function(){o("resize")},updateOnScroll:function(){o("scroll")},init:function(){d.container.trigger("ftoc_common"),o("init")}}}(),h=function(){var t=function(t){var e;e=void 0!==t?t:d.contents.height(),d.list.css("height",e-d.header.outerHeight()+"px")},e=function(){d.list.css("height","auto")},n=function(){d.list.css("height","")};return{set:t,setAuto:e,unset:n}}();if(n.isColExpList())var x=function(){var e=function(){n.showColExpIcon()&&n.isAccordionList()?(d.colExpIcons.on("click",o),d.container.on("ftocAfterScrollToTarget",o)):n.showColExpIcon()?(d.colExpIcons.on("click",i),d.container.on("ftocAfterScrollToTarget",i)):d.container.on("ftocAfterScrollToTarget",o),n.showColExpIcon()&&d.colExpIcons.on("mousedown",f),d.container.on("ftocAfterTargetIndicated",function(t,e){g(e)}),s("Actived colExpSubList().")},i=function(e,n){$currentTarget=void 0===n?t(this):n;var i=$currentTarget.parent(".ftwp-has-sub");i.length&&($currentTarget.hasClass("ftwp-anchor")?u(i,$currentTarget.prev("button")):r(i,$currentTarget))},o=function(e,n){$currentTarget=void 0===n?t(this):n;var i=$currentTarget.parent(".ftwp-item");i.length&&($currentTarget.hasClass("ftwp-anchor")?c(i,$currentTarget.prev("button")):(r(i,$currentTarget),l(i)))},r=function(t,e){t.hasClass("ftwp-collapse")?u(t,e):t.hasClass("ftwp-expand")&&a(t,e)},c=function(t,e){l(t),t.hasClass("ftwp-has-sub")&&u(t,e)},a=function(t,e){t.removeClass("ftwp-expand").addClass("ftwp-collapse"),e.length&&e.removeClass("ftwp-icon-expand").addClass("ftwp-icon-collapse")},u=function(t,e){t.removeClass("ftwp-collapse").addClass("ftwp-expand"),e.length&&e.removeClass("ftwp-icon-collapse").addClass("ftwp-icon-expand")},l=function(e){d.hasSubItems.each(function(){$thisItem=t(this),$thisItem.get(0)!=e.get(0)&&($thisItem.find(e).length||a($thisItem,$thisItem.children("button")))})},g=function(e){n.isAccordionList()&&l(e.parent(".ftwp-item"));var i=e.parents(".ftwp-has-sub");i&&i.each(function(){var e=t(this),n=e.children("button");u(e,n)})};return{_construct:e}}();var w=function(){var r,e=function(){d.anchors.on("click",function(e){var n=t(e.currentTarget);o(n)}),s("Actived scrollToTarget().")},i=!1,o=function(e){$targetObj=t(e.attr("href"));var o=($targetObj.target,e.data("index")),r=p.data.headingsTop[o];if(void 0!==r){var c=r.headingTop;t("html, body").animate({scrollTop:c},{duration:fixedtocOption.scrollDuration,start:function(){i=!0}}).promise().then(function(){i=!1;var n=p.data.headingsTop[o].headingTop;c!=n&&t("html, body").animate({scrollTop:n},100,function(){var e=p.data.headingsTop[o].headingTop;n!=e&&t("html, body").animate({scrollTop:e},1,function(){})}),s("Fixed scrolling to target!!"),f(e),d.container.trigger("ftocAfterScrollToTarget",[e,c])})}},f=function(t){if(c(),r=t,t.addClass("ftwp-active"),(v.location.fixedToPost||v.location.fixedWidget)&&(t.is(":focus")||i||t.focus()),n.showColExpIcon()){var e=t.prev();e.length&&e.addClass("ftwp-active")}},c=function(){if(r&&(r.removeClass("ftwp-active").blur(),n.showColExpIcon())){var t=r.prev();t.length&&t.removeClass("ftwp-active")}},a=function(){r=void 0,d.anchors.removeClass("ftwp-active").blur(),n.showColExpIcon()&&d.colExpIcons.removeClass("ftwp-active")};return{_construct:e,activeCurrent:f,deactiveAll:a,deactivePrev:c}}(),m=function(){var o,r,e=function(){d.window.on("ftocScroll",f).on("ftocResize",f),s("Actived targetIndicator().")},n=function(){d.window.on("ftocScroll",f).on("ftocResize",f)},i=function(){d.window.off("ftocScroll",f).off("ftocResize",f)},f=function(){function i(){t.each(e,function(t){return void 0===e[t+1]?!1:this.headingTop<=n&&e[t+1].headingTop>n?(o=[this,e[t+1],t],r=p.data.document.height,w.activeCurrent(this.anchorEle),d.container.trigger("ftocAfterTargetIndicated",[this.anchorEle,n]),!1):void 0})}var e=p.data.headingsTop,n=p.data.scrollTop;return e[0].headingTop>n||p.data.postRect.bottom<n?(void 0!==o&&w.deactiveAll(),void(o=void 0)):void 0!==r&&r!=p.data.document.height?(i(),void s("Fixed target indicator!!")):void(void 0!==o&&o[0].headingTop<=n&&o[1].headingTop>n||i())};return{_construct:e,start:n,stop:i}}(),C=(function(){var e=function(t,e){i(),"fixedToPost"==e.location&&(d.container.on("ftocAfterMaximize",o),d.container.on("ftocAfterMinimize",r)),s("Actived noScrollWindow().")},n=function(){r(),d.container.off("ftocAfterMaximize",o),d.container.off("ftocAfterMinimize",r),s("Deactived noScrollWindow().")},i=function(){o()},o=function(){d.list.on("scroll",f),d.list.on("mouseleave",c),d.document.on("click",a),d.window.on("scroll",c)},r=function(){d.body.removeClass("ftwp-no-scroll"),d.list.off("scroll",f),d.list.off("mouseleave",c),d.document.off("click",a),d.window.off("scroll",c)},f=function(){d.body.addClass("ftwp-no-scroll")},c=function(){d.body.hasClass("ftwp-no-scroll")&&(d.list.off("scroll",f),d.body.removeClass("ftwp-no-scroll"),setTimeout(function(){d.list.on("scroll",f)},100))},a=function(e){t.contains(d.list.get(0),e.target)||c()};return{_construct:e,_destruct:n,on:o,off:r}}(),function(){var t=function(){d.container.addClass("ftwp-hidden-state"),s("Actived hideToc().")},e=function(){d.container.removeClass("ftwp-hidden-state"),s("Deactived hideToc().")};return{_construct:t,_destruct:e}}()),T=function(){var t=function(){i(),r.set(),d.window.on("ftocResize",r.set),c["in"](),d.container.on("ftocAfterMinMax",c.inOut),s("Actived ftocInOut().")},e=function(){o(),r.unset(),d.window.off("ftocResize",r.set),f.unset(),h.unset(),c.out(),d.container.off("ftocAfterMinMax",c.inOut),s("Deactived ftocInOut().")},i=function(){d.container.addClass("ftwp-fixed-to-post"),d.container.parent().is(d.body)||d.container.appendTo(d.body),d.minIcon.addClass("ftwp-icon-minimize")},o=function(){d.container.removeClass("ftwp-fixed-to-post"),d.minIcon.removeClass("ftwp-icon-minimize")},r=function(){var t=function(){if(c.setTransformOrigin(),n.isPositionAtFixed("left")){var t=p.data.window.width-p.data.postRect.left+fixedtocOption.fixedOffsetX,e=p.data.postRect.left-fixedtocOption.fixedOffsetX;i(d.trigger,t,e),i(d.contents,t,e)}else{var a=p.data.postRect.right+fixedtocOption.fixedOffsetX,s=p.data.window.width-a;o(d.trigger,a,s),o(d.contents,a,s)}r(),f.reset()},e=function(t,e){var n=t.outerWidth();return n>=e?!0:!1},i=function(t,n,i){e(t,i)?(t.css({left:"0px",right:"auto"}),c.reverseTransformOrigin(t)):t.css({right:n+"px",left:"auto"})},o=function(t,n,i){e(t,i)?(t.css({right:"0px",left:"auto"}),c.reverseTransformOrigin(t)):t.css({left:n+"px",right:"auto"})},r=function(){n.isPositionAtFixed("top")?(d.trigger.css("top",p.data.fixedOffsetTop+"px"),d.contents.css("top",p.data.fixedOffsetTop+"px")):n.isPositionAtFixed("middle")?d.contents.css("top",p.data.fixedHeight+"px"):(d.trigger.css("top",""),d.contents.css("top",""))},a=function(){d.trigger.css({left:"",right:"",top:""}),d.contents.css({left:"",right:"",top:""}),c.removeTransformOrigin()};return{set:t,unset:a}}(),f=function(){var t=function(){var e,t=r();e=n.isPositionAtFixed("middle")?p.data.window.height-p.data.fixedHeight:p.data.window.height-p.data.fixedOffsetTop;var i;i=t>e?e:t,d.contents.css("height",i+"px");var o=a(i);h.set(o)},e=function(){d.contents.css("height","")},r=function(){var t;return n.isAutoHeightFixedToPost()?n.isColExpList()?t=window.innerHeight:(h.setAuto(),d.contents.css("height","auto"),t=d.contents.outerHeight(),e(),h.unset()):t=fixedtocOption.contentsFixedHeight,t};return{reset:t,unset:e}}(),c=function(){var r,f,t="ftwp-animate-"+fixedtocOption.inOutEffect+"-in",e="ftwp-animate-"+fixedtocOption.inOutEffect+"-inOut",n=function(){d.container.addClass(t)},i=function(){d.container.removeClass(t+" "+e),void d.container.offsetWidth,d.container.addClass(e),setTimeout(function(){d.container.removeClass(e)},1e3)},o=function(){d.container.removeClass(t+" "+e)},c=function(){var t=fixedtocOption.fixedPosition.match(/(\w+)\-(\w+)/i);if(t){var e=t[2],n=t[1];"left"==e?e="right":"right"==e&&(e="left"),"middle"==n&&(n="center"),r="ftwp-transform-"+e+"-"+n,d.trigger.removeClass(f).addClass(r),d.contents.removeClass(f).addClass(r)}},a=function(t){f=r.match(/left/i)?r.replace("left","right"):r.replace("right","left"),t.removeClass(r).addClass(f)},s=function(){d.trigger.removeClass(r+" "+f),d.contents.removeClass(r+" "+f)};return{inCls:t,"in":n,inOut:i,out:o,setTransformOrigin:c,reverseTransformOrigin:a,removeTransformOrigin:s}}();return{_construct:t,_destruct:e,effectInCls:c.inCls}}(),I=function(){var e=function(t){d.trigger.on("click",o),d.minIcon.on("click",r),d.trigger.on("mousedown",f),d.minIcon.on("mousedown",f),n.isQuickMin()&&d.document.on("click",c),n.isEscMin()&&d.document.on("keyup",a),n.isEnterMax()&&d.document.on("keyup",u),s("Actived minMaxFtoc().")},i=function(t){d.trigger.off("click",o),d.minIcon.off("click",r),d.trigger.off("mousedown",f),d.minIcon.off("mousedown",f),n.isQuickMin()&&d.document.off("click",c),n.isEscMin()&&d.document.off("keyup",a),n.isEnterMax()&&d.document.off("keyup",u),s("Deactived minMaxFtoc.")},o=function(){d.container.removeClass("ftwp-minimize").addClass("ftwp-maximize"),d.container.trigger("ftocAfterMinMax"),d.container.trigger("ftocAfterMaximize"),s("Maximized FTOC.")},r=function(){d.container.removeClass("ftwp-maximize").addClass("ftwp-minimize"),d.container.trigger("ftocAfterMinMax"),d.container.trigger("ftocAfterMinimize"),s("Minimized FTOC.")},c=function(e){d.container.hasClass("ftwp-maximize")&&!t.contains(d.container.get(0),e.target)&&r()},a=function(t){d.container.hasClass("ftwp-maximize")&&27==t.keyCode&&r()},u=function(t){d.container.hasClass("ftwp-minimize")&&13==t.keyCode&&o()},l=function(){return d.container.hasClass("ftwp-maximize")?!0:!1},p=function(){return d.container.hasClass("ftwp-minimize")?!0:!1};return{_construct:e,_destruct:i,isMax:l,isMin:p,minimize:r}}(),W=function(){var t,e="ftwp-fade-trigger",n="ftwp-unfade-trigger",i=function(){d.container.hasClass("ftwp-minimize")&&r(),d.trigger.on("mouseenter",c).on("mouseleave",a),d.container.on("ftocAfterMinimize",r).on("ftocAfterMaximize",f),s("Actived fadeTrigger().")},o=function(){f(),d.trigger.off("mouseenter",u),d.trigger.off("mouseleave",l),d.container.off("ftocAfterMinimize",r),d.container.off("ftocAfterMaximize",f),s("Deactived fadeTrigger().")},r=function(){void 0===t&&(setTimeout(function(){d.container.removeClass(T.effectInCls)},500),t=setTimeout(function(){d.trigger.addClass(e)},fixedtocOption.fadeTriggerDuration))},f=function(){void 0!==t&&(clearTimeout(t),t=void 0,d.trigger.removeClass(e+" "+n))},c=function(){void 0!==t&&(clearTimeout(t),d.trigger.removeClass(e).addClass(n))},a=function(){void 0!==t&&(f(),r())},u=function(){c()},l=function(){a()};return{_construct:i,_destruct:o,stop:f,start:r,restart:a,mouseLeave:l}}(),A=function(){var t=function(t){t&&t.length&&t.removeClass("ftwp-unblur").addClass("ftwp-blur")},e=function(t){t&&t.length&&t.hasClass("ftwp-blur")&&(t.removeClass("ftwp-blur").addClass("ftwp-unblur"),setTimeout(function(){t.removeClass("ftwp-unblur")},500))},n=function(t){t&&t.length&&t.removeClass("ftwp-blur ftwp-unblur")};return{start:t,stop:e,clear:n}}(),P=function(){var t,e=function(){i(),d.window.on("ftocResize",o),d.container.on("ftocAfterMaximize",r),d.container.on("ftocAfterMinimize",f),d.container.on("ftocAfterScrollToTarget",c),s("Actived blurBody().")},n=function(){a(),d.window.off("ftocResize",o),d.container.off("ftocAfterMaximize",r),d.container.off("ftocAfterMinimize",f),d.container.off("ftocAfterScrollToTarget",c),s("Deactived blurBody().")},i=function(){t=d.container.siblings(':not("script, style")'),I.isMax()&&u()&&A.start(t)},o=function(){I.isMax()&&u()?A.start(t):A.stop(t)},r=function(){u()&&A.start(t)},f=function(){A.stop(t)},c=function(e,n){u()&&d.container.hasClass("ftwp-maximize")&&(I.minimize(),A.stop(t),n.blur())},a=function(){A.clear(t)},u=function(){return.6*d.window.width()<=d.contents.outerWidth()?!0:!1};return{_construct:e,_destruct:n}}();if(n.fixedWidget())var b=function(){var t,e=function(){t=d.widget.siblings(".widget"),i(),d.contents.on("ftocAfterExpandContents",o),d.contents.on("ftocAfterCollapseContents",r),s("Actived blurWidgets().")},n=function(){f(),d.contents.off("ftocAfterExpandContents",o),d.contents.off("ftocAfterCollapseContents",r),s("Deactived blurWidgets().")},i=function(){"expand"==d.contents.data("colExp")&&A.start(t)},o=function(){A.start(t)},r=function(){A.stop(t)},f=function(){A.clear(t)};return{_construct:e,_destruct:n}}();if(n.inWidget()||n.supportInPost())var R=function(){var t,e,n=function(n,i){t=n,e=i,o(),d.minIcon.on("mousedown",f),d.minIcon.on("click",c)},i=function(){r(),d.minIcon.off("mousedown",f),d.minIcon.off("click",c)},o=function(){a()?l(0,t):u(0,e)},r=function(){d.list.show(0),d.minIcon.removeClass("ftwp-icon-collapse ftwp-icon-expand")},c=function(n){a()?u(100,e,n):l(100,t,n)},a=function(){var t=d.contents.data("colExp");return"expand"==t||void 0===t?!0:!1},u=function(t,e,n){d.list.hide(t,function(){d.minIcon.removeClass("ftwp-icon-expand").addClass("ftwp-icon-collapse"),void 0!==e&&e(n)}),d.contents.data("colExp","collapse"),d.contents.trigger("ftocAfterCollapseContents"),s("Collapsed contents.")},l=function(t,e,n){d.list.show(t,function(){d.minIcon.removeClass("ftwp-icon-collapse").addClass("ftwp-icon-expand"),void 0!==e&&e(n)}),d.contents.data("colExp","expand"),d.contents.trigger("ftocAfterExpandContents"),s("Expanded contents.")};return{construct:n,destruct:i}}();if(n.inWidget())var H=function(){var t=function(){R.construct(),s("Actived colExpConentsInWidget().")},e=function(){R.destruct(),s("Deactived colExpConentsInWidget().")};return{_construct:t,_destruct:e}}();if(n.fixedWidget())var z=function(){var t=function(){R.construct(n,i),s("Actived colExpConentsInFixedWidget().")},e=function(){R.destruct(),s("Deactived colExpConentsInFixedWidget().")},n=function(){p.ftocRectInWidget.updateHeight(),E.setFixed()},i=function(){p.ftocRectInWidget.updateHeight(),E.setFixed()};return{_construct:t,_destruct:e}}();if(n.inWidget())var M=function(){var t=function(){n(),s("Actived displayInWidget().")},e=function(){d.contents.css("height",""),s("Deactived displayInWidget().")},n=function(){d.container.parent().is(d.widgetContainer)||d.container.appendTo(d.widgetContainer),d.contents.css("height","auto")};return{_construct:t,_destruct:e,init:n}}();if(n.fixedWidget())var E=function(){var t=function(){n(),o(),d.window.on("ftocResize",o),s("Actived fixedInWidget().")},e=function(){n(),r(),d.window.off("ftocResize",o),h.unset(),s("Deactived fixedInWidget().")},n=function(){M.init()},o=function(){d.widget.addClass("ftwp-widget-fixed");var t=p.data.ftocRectInWidget;d.contents.css({left:t.left,top:t.top,width:t.width+"px",height:t.height+"px"});var e=a(t.height);h.set(e)},r=function(){d.widget.removeClass("ftwp-widget-fixed"),d.contents.css({left:"",top:"",width:"",height:""})};return{_construct:t,_destruct:e,setFixed:o}}();if(n.supportInPost())var _=function(){var r,t=function(){i(),d.window.on("ftocResize",f),s("Actived displayInPost().")},e=function(){o(),d.window.off("ftocResize",f),s("Deactived displayInPost().")},i=function(){d.container.parent().is(d.containerOuter)||d.container.appendTo(d.containerOuter),f()},o=function(){d.contents.css("height",""),h.unset()},f=function(){0==fixedtocOption.contentsWidthInPost&&n.isFloat()?(d.containerOuter.css("width",""),r=d.containerOuter.outerWidth()+1,d.containerOuter.css("width",r+"px")):d.containerOuter.css("width",""),d.containerOuter.css("height",p.data.containerOuterHeight+"px"),d.contents.css("height",p.data.containerOuterHeight+"px");var t=a(p.data.containerOuterHeight);h.set(t)};return{_construct:t,_destruct:e}}(),y=function(){var t=function(){R.construct(n,i),s("Actived colExpConentsInFixedWidget().")},e=function(){R.destruct(),s("Deactived colExpConentsInFixedWidget().")},n=function(t){i(t)},i=function(t){void 0!==t&&"click"==t.type&&p.updateInPost(),d.containerOuter.css("height",p.data.containerOuterHeight+"px"),d.contents.css("height",p.data.containerOuterHeight+"px"),h.set(a(p.data.containerOuterHeight))};return{_construct:t,_destruct:e}}();var F=function(){var t=function(){e.init(),u(),l(),d.container.trigger("ftocReady"),d.window.load(i),s(fixedtocOption)},i=function(){p.createOnInit(),n.isColExpList()&&v.register("common",x),v.register("common",w),v.register("common",m),v.register("hidden",C),n.fixedWidget()&&(v.register("fixedWidget",z),v.register("fixedWidget",E),v.register("fixedWidget",b)),n.inWidget()&&(v.register("inWidget",M),v.register("inWidget",H)),n.supportInPost()&&(v.register("inPost",_),v.register("inPost",y)),v.register("fixedToPost",T),v.register("fixedToPost",I),v.register("fixedToPost",W),v.register("fixedToPost",P),v.init(),d.window.resize(o),d.window.scroll(f)},o=function(){p.updateOnResize(),v.updateOnResize(),d.window.trigger("ftocResize")},f=function(){p.updateOnDocumentHeightChange(),p.updateOnScroll(),v.updateOnScroll(),d.window.trigger("ftocScroll")},c=function(){s(fixedtocOption),p.updateOnResize(),v.updateOnResize(),d.window.trigger("ftocResize")};return{option:e,onReady:t,reload:c}}();return t(document).ready(F.onReady),{option:F.option,reload:F.reload}}(jQuery);