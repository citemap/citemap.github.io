window.EDH=window.EDH||{};
(function(e,f){e.EDH.FASTConstructor=function(){var B=/adinfo/.test(location.href.toLocaleLowerCase()),p=!0,r={system:{site:"everydayhealth",hideClass:"hide",center:!0,deviceType:"desktop",hasInView:!0,hasAds:!0,zone:"generalwellness//general",callBack:"",adRefreshTimer:0,includeUTP:!0},pageTargeting:{ugc:"0"},preroll:{hide:!0,size:"640x480",url:""},slots:{slot:{id:"slot",collapse:!0,isCompanion:!1,isOutOfPage:!1,loaded:!1,oneByOne:!1,callBack:"",slotTargeting:{pos:"null",slot:"null"},setAdToRefresh:!1,
slotRefreshTime:0}}},c={log:[]},S=function(){if(!f.querySelector("#GPT")){e.googletag=e.googletag||{};e.googletag.cmd=e.googletag.cmd||[];var a=f.createElement("script"),b=f.getElementsByTagName("script")[0];a.async=!0;a.id="GPT";a.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js";b.parentNode.insertBefore(a,b);g("Page Level: Fetching GPT PubAds implementation.")}},C=function(a,b){var d;for(d in a)if(a.hasOwnProperty(d)){b[d]=b.hasOwnProperty(d)?q(b[d]):a[d];var e=b===c.system?"system":"page targeting";
g("Data Level: Setting "+e+" values: "+d+": "+b[d])}},D=function(a){a=a?a:c.system.zone;a=a.toLowerCase().split("/").filter(Boolean);a=a.filter(function(a,d,c){return c.indexOf(a)===d});return a=a.join("//")},q=function(a,b,d){b=new RegExp(b||"[^a-zA-Z0-9]$-_","gi");var c=RegExp(" ","gi");d=d||"_";return a&&a.constructor===String?a.replace(c,d).replace(b,d):a},l=function(a,b,d){b=q(b);d=q(d);if(a[b]&&Array.isArray(a[b]))return a[b].push(d),a[b];if(a[b]&&!Array.isArray(a[b]))return a[b]=a[b].split(),
a[b].push(d),a[b];a[b]=d;return a[b]},E=function(){var a=c.query&&c.query.inview&&c.query.inview.toLowerCase();"true"===a&&(c.system.hasInView=!0);"false"===a&&(c.system.hasInView=!1)},w=function(a,b,d,c){d=(a=a&&a.split(d||";"))&&a.length||0;for(var e;d--;)(e=a[d]&&a[d].split(c||"="))&&e[1]&&l(b,e[0],e[1])},t=function(a){for(var b=f.cookie.split("; "),d=b.length,c;d--;)if(c=b[d].split("="),c[0]===a)return e.unescape(c[1]);return""},T=function(a){e.utp=e.utp||"u=null;p=null";a=a?a:r;e.googletag&&
e.googletag.pubads&&e.googletag.pubads().updateCorrelator&&e.googletag.pubads().updateCorrelator();if(c.query){for(var b in a.system)a.system.hasOwnProperty(b)&&(c.system[b]=a.system[b]);for(var d in a.pageTargeting)a.pageTargeting.hasOwnProperty(d)&&(c.pageTargeting[d]=a.pageTargeting[d]);for(var m in a.slots)a.slots.hasOwnProperty(m)&&!c.slots.hasOwnProperty(m)&&l(c.slots,m,a.slots[m])}else c=Object.create(a),c.system=c.system,c.pageTargeting=c.pageTargeting,c.slots=c.slots,c.log=[["FAST: loading",
(new Date).getTime()]],C(r.system,c.system),C(r.pageTargeting,c.pageTargeting),c.query={},w(e.location.search.split("?")[1],c.query,"&","="),c.system.includeUTP&&w(e.utp,c.pageTargeting),t("aamdfp")&&w(t("aamdfp"),c.pageTargeting),t("aam_uuid")&&l(c.pageTargeting,"AdobeID",t("aam_uuid"));c.system.zone=D();b=c.pageTargeting.cat;d=/(;)/.test(b)?";":/(;)/.test(b)?";":"";b&&"object"!==typeof b&&d&&(b=b.replace(/cat=/gi,""),d&&(b=b.split(d).filter(Boolean)),g("Data Level: Cleaning cat: "+b),c.pageTargeting.cat=
b);(b=c.system&&c.system.deviceType&&c.system.deviceType.toLowerCase())&&l(c.pageTargeting,"plt","desktop"===b?"desktop":"mobileweb");(b=c.system&&c.system.deviceType&&c.system.deviceType.toLowerCase())&&"desktop"!==b&&l(c.pageTargeting,"mdv","tablet"===b?"tab":"sph");b=c.system;(d=c.system.site)||(d=e.location.host.split("."),d=d[d.length-2]||"everydayhealth");b.site=d||r.system.site;b=f.referrer&&f.referrer.split("/")[2];d=new RegExp(c.system.site);b&&!d.test(b)&&l(c.pageTargeting,"ref",q(b));E();
b=c.slots;for(var h in b)b.hasOwnProperty(h)&&!b[h].size&&(b[h].size=/(leader)/.test(b[h].slotTargeting.slot)?[[728,90]]:[[300,250]]);h=c.query&&c.query.test_ads||"";h.length&&l(c.pageTargeting,"zt","test_"+h);(h=c.query&&c.query.xid)&&l(c.pageTargeting,"src",h&&h.split("_")[0]);c.system.hasAds=c.query&&!c.query.no_ads;E();h=c.pageTargeting;for(var k in h)h.hasOwnProperty(k)&&(h[k]=q(h[k]))},g=function(a){var b=(new Date).getTime();c.log.push([b,"EDH.FAST: "+a]);B&&e.console&&F(c.log.length-1||0)},
F=function(a){e.console[e.console&&e.console.info?"info":"log"](c.log[a][0]+" - "+c.log[a][1])},U=function(){var a=c.pageTargeting;e.googletag.cmd.push(function(){for(var b in a)a.hasOwnProperty(b)&&e.googletag.pubads().setTargeting(b,a[b])})},W=function(){g('Page Level: Event added "slotRenderEnded".');e.googletag.cmd.push(function(){e.googletag.pubads().addEventListener("slotRenderEnded",function(a){var b=a.slot.getSlotId().getDomId(),d=c.slots[b],e=d.ad.getContentUrl(),h=f.querySelector("#"+b),
k=f.createElement("span");k.id=b+"track";h.parentNode.insertBefore(k,h);d.correlator=e.split("correlator=")[1].split("&")[0];c.system.correlator=d.correlator;d.creativeId=a.creativeId;d.lineItemId=a.lineItemId;d.width=Array.isArray(a.size)&&a.size.length?a.size[0]:0;d.height=Array.isArray(a.size)&&a.size.length?a.size[1]:0;d.src=e;d.adUnitId=d.ad.getAdUnitPath();V(b);/debugadcode/i.test(location.search.split("?")[1])&&x(b);eval(d.callBack);g(b+" Receiving ad with correlator: "+d.correlator+" creativeId: "+
a.creativeId+".");g(b+" Callback triggered: "+d.callBack)})})},X=function(){var a=c.slots;e.googletag.cmd.push(function(){for(var b in a)a.hasOwnProperty(b)&&!a[b].ad&&(G(a[b]),e.googletag.display(a[b].id),g("Slot Level: "+a[b].id+" - Call display"))})},G=function(a){g("Slot Level: "+a.id+" - Setting slot level values.");if(a.isOutOfPage){var b=c.system;a.ad||(a.ad=e.googletag.defineOutOfPageSlot("/4213/"+b.site+"/"+b.zone,a.id).addService(e.googletag.pubads()),g("Slot Level: "+a.id+"Define OOP Slot : /4213/"+
b.site+"/"+c.system.zone))}else if(b=c.system,!a.ad){var d=a.zone?D(a.zone):b.zone;a.ad=e.googletag.defineSlot("/4213/"+(a.site&&""!==a.site?a.site:b.site)+"/"+d,a.size,a.id).addService(e.googletag.pubads())}Y(a);a.collapse&&(a.ad.setCollapseEmptyDiv(!0),g("Slot Level: "+a.id+" - Add service: Collapse empty div after render."));for(var m in a.slotTargeting)a.slotTargeting.hasOwnProperty(m)&&(a.ad.setTargeting(m,a.slotTargeting[m]),g("Slot Level: "+a.id+" - Slot target: "+m+": "+a.slotTargeting[m]));
a=a.sizeMapping;a.sizeMapping&&"object"===typeof a.sizeMapping&&(a.ad.defineSizeMapping(a.sizeMapping),g(a.id+" - Define Size Mapping: "+JSON.stringify(a.sizeMapping)))},Y=function(a){a.isCompanion&&(a.ad.addService(e.googletag.companionAds()),e.googletag.cmd.push(function(){e.googletag.companionAds().setRefreshUnfilledSlots(!0)}),c.system.hasCompanion=!0,g("Slot Level: "+a.id+" - Add service: companionAds"))},Z=function(){if(!c.preroll)return!1;e.googletag.cmd.push(function(){e.googletag.pubads().enableVideoAds()});
g("Page Level: Add service: VideoAds");return!0},aa=function(){c.system.hasCompanion&&e.googletag.cmd.push(function(){e.googletag.companionAds().setRefreshUnfilledSlots(!0)})},ca=function(a){var b=f.createElement("div"),c=f.createElement("table");var e=decodeURIComponent(decodeURIComponent(a.src)).split("?")[1]||"";e=e.split("&scp=")[1]||e;e=e.split("&cookie")[0]||e;e=e.split("&cust_params=").join("&");e=e.split("&")||e;if(!e.length)return!1;b.appendChild(c);b.style.cssText="border: 1px solid rgb(0, 153, 0); position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: scroll;padding: 10px; z-index: 2000010; resize: both; font-style: normal; font-variant: normal; font-weight: normal;font-stretch: normal; font-size: 13px; line-height: 150%; text-align: left; background-color: rgb(255, 248, 224);";
b.className="debugadcode";ba(c,a,e);return b},ba=function(a,b,c){c.map(function(b){b=b.split("=");n(a,b[0],b[1])});n(a,"Correlator",b.ad.getServices()[0].getCorrelator());n(a,"Unit Id",b.adUnitId);n(a,"Decode URL",'<input type="text" style="width:100%;" value="'+decodeURIComponent(decodeURIComponent(b.src))+'"></input>');n(a,"Creative",b.creativeId);n(a,"Line Item",b.lineItemId);n(a,"Size",b.width+"x"+b.height);return a},n=function(a,b,c){a=a.insertRow(0);a.insertCell(0).innerHTML='<b style="display:inline-block;min-width:100px">'+
b+":</b> ";a.insertCell(1).innerHTML=c},y=function(a){var b=c.slots;if(a)H(a);else for(var d in b)b.hasOwnProperty(d)&&H(b[d].id)},H=function(a){var b=f.getElementById(a),c=b&&b.getElementsByClassName("debugadcode")[0];c&&(b.removeChild(c),g(a+" - Debug block cleared."))},x=function(a){y(c.slots[a].id);var b=f.getElementById(c.slots[a].id);if(b){var d=b.children[0];b.style.position="relative";g(a+" - Debug block added.");return d&&b.insertBefore(ca(c.slots[a]),d)}return!1},da=function(){e.googletag.impl||
(e.googletag.cmd.push(function(){e.googletag.pubads().setCentering(c.system.center);e.googletag.pubads().disableInitialLoad();window.__iasPET&&window.__iasPET.setTargetingForGPT();e.googletag.enableServices()}),g("Page Level: Setting centering to "+c.system.center),g("Page Level: disable initial load."),g("Page Level: Enabling Services."))},I=function(a){c.slots[a].loaded||(e.googletag.cmd.push(function(){e.googletag.pubads().refresh([c.slots[a].ad],{changeCorrelator:!1})}),c.slots[a].loaded=!0,g("Slot Level: "+
a+" Regestering ad with GPT."))},u=function(a){var b=c.slots;if(a&&!f.getElementById(a))return!1;if(a)J(f.getElementById(a)),g(a+" - has been hidden.");else for(var d in b)b.hasOwnProperty(d)&&(J(f.getElementById(b[d].id)),g(b[d].id+" - has been hidden."));return!1},V=function(a){var b=f.getElementById(a)&&f.getElementById(a).querySelector("iframe")&&!!f.getElementById(a).querySelector("iframe").contentDocument.body.querySelector("[src$='1x1.JPG']");if(c.slots[a].oneByOne=b)u(a),g(a+" - is a 1x1 ad and has been hidden.")},
L=function(a){var b=c.slots;if(a&&!f.getElementById(a))return!1;if(a)K(f.getElementById(a));else for(var d in b)b.hasOwnProperty(d)&&K(f.getElementById(b[d].id));return!1},J=function(a){if(a&&"string"===typeof a.className){var b=a.className.concat(" "+c.system.hideClass);a.className=b}},K=function(a){if(a&&a.className){var b=a.className.replace(c.system.hideClass,"").trim();a.className=b}},M=function(a){return c.system.hasAds&&f.getElementById(a)&&v("#"+a)&&c.slots[a].ad?c.slots[a].loaded||c.system.hasInView&&
!z("#"+a)&&!f.getElementById(a).dataset.slideAd?!1:!0:!1},z=function(a){var b=f.querySelector(a)&&f.querySelector(a).getBoundingClientRect();var d=f.querySelector(a+"track")&&f.querySelector(a+"track").getBoundingClientRect();b=(b&&(b.bottom||b.height||b.left||b.right||b.top||b.width)?b:d)||b;return!(b.top>c.system.windowHeight||0>b.bottom||0>b.right||b.left>c.system.windowWidth)&&v(a)},ea=function(a,b){return"undefined"!==getComputedStyle?getComputedStyle(a,null).getPropertyValue(b):a.currentStyle[b]},
v=function(a){var b="object"===typeof a?a:f.querySelector(a);a=b.parentNode;var d=b.id;return d&&c.slots[d]&&c.slots[d].ad&&/display: none/.test(b.getAttribute("style"))||["opacity","display","visibility"].reduce(function(a,c){return a&&!/(0|none|hidden)/.test(ea(b,c))},!0)?a&&9===a.nodeType?!0:v(a):!1},fa=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:null};var c=document.createEvent("CustomEvent");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c},P=function(){if(c.system.hasAds){var a=
ha();var b=a?a+"Hidden":"hidden";a=a?a+"Visibilitychange":"visibilitychange";N();"function"!==typeof window.CustomEvent&&(window.CustomEvent=fa);e.onresize=N;e.onscroll=O;var d=window.setInterval(function(){window.focus();window.dispatchEvent(new CustomEvent("scroll"))},1250);setTimeout(function(){window.clearInterval(d)},8750);document.addEventListener(a,function(){p=document[b]?!1:!0;g("Page Level: The tab is now visible? "+p)});window.addEventListener("focus",function(){p=!0});window.addEventListener("load",
function(){window.focus();window.dispatchEvent(new CustomEvent("scroll"))});window.addEventListener("blur",function(){p=!1});g("Page Level: Resize and scroll events attached.")}else window.setTimeout(P,50)},N=function(){c.system.windowHeight=e.innerHeight||f.documentElement.clientHeight;c.system.windowWidth=e.innerWidth||f.documentElement.clientWidth;O()},O=function(){var a=c.slots;Q();for(var b in a)if(a[b].hasOwnProperty("loaded")&&a[b].loaded){var d=c.slots[b],f;if(f=!d.isOutOfPage)if(f=d){f=void 0;
f=void 0===f?1:f;var h=document.querySelector("#"+b);if(null==h||"hidden"===window.getComputedStyle(h).visibility)f=-1;else{var k=h.getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight;h=k.top<=l&&0<=k.top+k.height;var n=k.left<=(window.innerWidth||document.documentElement.clientWidth)&&0<=k.left+k.width;f=k.height+k.top>=Math.floor(f*k.height)&&l-k.top>=Math.floor(f*k.height);f=n&&f?1:n&&h?0:-1}f=1===f&&d.setAdToRefresh}f&&(e.googletag.pubads().refresh([d.ad],{changeCorrelator:!1}),
d.setAdToRefresh=!1,g(d.id+" Refreshed."))}},Q=function(a){var b=c.slots;if(a&&M(a))I(a);else for(var d in b)b.hasOwnProperty(d)&&M(b[d].id)&&I(b[d].id)},ha=function(){if("hidden"in document)return null;for(var a=["moz","ms","o","webkit"],b=0;b<a.length;b++)if(a[b]+"Hidden"in document)return a[b];return null},R=function(a){var b=c.slots;if(!c.system.hasAds||a&&!A(a))return!1;a&&A(a)&&(e.googletag.pubads().refresh([b[a].ad],{changeCorrelator:!0}),g(a+" Refreshing slot."));if(!a){e.googletag.pubads().updateCorrelator();
for(var d in b)b.hasOwnProperty(d)&&(A(d)?(e.googletag.pubads().refresh([b[d].ad],{changeCorrelator:!1}),b[d].setAdToRefresh=!1,g(d+" : Refreshing slot.")):(c.slots[d].loaded&&(b[d].setAdToRefresh=!0,g(d+" : will refresh later.")),g(d+" : has not yet loaded so will not refresh.")))}return!1},A=function(a){return p&&f.getElementById(a)&&v("#"+a)&&c.slots[a].ad&&!c.slots[a].isOutOfPage&&(!c.system.hasInView||z("#"+a))?!0:!1},ia=function(){var a=c.slots;var b=c.system.adRefreshTimer;if(a&&b&&0<b){for(var d in a)a[d]&&
a.hasOwnProperty(d)&&a[d].isOutOfPage&&(a[d].setAdToRefresh=b);a=b}else a=!1;a&&setInterval(R,a)};this._version=function(){return"1.2.1"};this._init=function(a){T(a);g("Page Level: Calling init");a&&a.system&&(void 0===a.system.hasAds||a.system.hasAds)&&!/no_ads/.test(location.search.toLocaleLowerCase())?(S(),U(),aa(),Z(),da(),eval(a.system.callBack),X(),W(),P(),ia()):(g("Ads are disabled."),u())};this._disableInitialSlotLoad=function(a){a.forEach(function(a){c.slots[a].loaded=!0})};this._addSlotsToPage=
function(a){window.googletag.cmd.push(function(){for(var b in a)a.hasOwnProperty(b)&&!a[b].ad&&(G(a[b]),window.googletag.pubads().refresh([a[b]],{changeCorrelator:!1}),g("Slot Level: "+a[b].id+" - Call display"))});a.forEach(function(a){c.slots[a.id]=a})};this._getData=function(){return c};this._load=function(a){return Q(a)};this._refresh=function(a){return R(a)};this._debug=function(a){var b=c.slots;if(a)x(a,!0);else for(var d in b)b.hasOwnProperty(d)&&x(b[d].id,!0)};this._removeDebug=function(a){return a?
y(a):y()};this._toggleUgc=function(){var a=c.pageTargeting.ugc||0;a="0"===a?"1":"0";e.googletag.cmd.push(function(){e.googletag.pubads().setTargeting("ugc",a)});return c.pageTargeting.ugc=a};this._isInView=function(a){return z(a)};this._hide=function(a){return a?u(a):u()};this._show=function(a){return a?L(a):L()};this._showLog=function(){for(var a=c.log.reverse().length;a--;)F(a);B=!0};this._getPreroll=function(a){if(c.preroll){var b=c.pageTargeting,d="&competitiveExclusionMode=off&scp=slot%3Dpreroll%26pos%3Dvideo&cust_params=",
e="//pubads.g.doubleclick.net/gampad/ads?sz="+c.preroll.size+"&gdfp_req=1&iu=/4213/";e+=c.system.site+"/"+c.system.zone+"&url=[referrer_url]&correlator="+c.system.correlator;e+="&env=vp&unviewed_position_start=1&output=xml_vast3&impl=s";for(var f in b)if(b.hasOwnProperty(f)){var k=Array.isArray(b[f])?b[f].join("%2C"):b[f];d+=f+"%3D"+k+"%26"}c.preroll.url=e+d+"bcsrc%3D"+a;g("Generating preroll url.");g(c.preroll.url);a=c.preroll.url}else a="";return a}}})(window,document);
window.EDH.FASTConstructor.prototype={init:function(e){this._init(e)},disableInitialSlotLoad:function(e){this._disableInitialSlotLoad(e)},addSlotsToPage:function(e){this._addSlotsToPage(e)},version:function(){return this._version()},data:function(){return this._getData()},load:function(e){return e?this._load(e):this._load()},refresh:function(e){return this._refresh(e)},debug:function(e){return e?this._debug(e):this._debug()},removeDebug:function(e){return e?this._removeDebug(e):this._removeDebug()},
toggleUgc:function(){return this._toggleUgc()},isInView:function(e){return this._isInView(e)},hide:function(e){return e?this._hide(e):this._hide()},show:function(e){return e?this._show(e):this._show()},showLog:function(){return this._showLog()},getPreroll:function(e){return this._getPreroll(e)}};var EH=EH||{};EH.Dart={registerExtraAd:function(){}};